<!DOCTYPE html>
<html>
<head>
<title>GeoJSON Example</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css" />
<link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.76.1/dist/L.Control.Locate.min.css" />
<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"></script>
<script src="https://cdn.jsdelivr.net/npm/leaflet.locatecontrol@0.76.1/dist/L.Control.Locate.min.js" charset="utf-8"></script>
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
 <script src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>
	
<style>
#mapdiv {
	width: 100%;
    height: 100vh;
	}

body {
	margin: 0;
	padding: 0;
	}

.leaflet-popup-content-wrapper{
        background-color: #000000;
        color: #fff;
        border: 2px solid rgba(255, 255, 255);
	}

     .leaflet-popup-tip{
        background-color: #000000;      
    }

</style>
</head>
<body>
	<div id="mapdiv">  </div>
<script>

var url1 = 'randomMarkersWithTrafficAndNames.json';   
var url2 = 'userCurrentLocation.json';

	var map = L.map('mapdiv').setView([39.0, -98.26], 4); 
	//var map = L.map('mapdiv').setView(userCurrentLocation.getBounds(), 4); 

	var osm = new L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png',{ 
				attribution: 'Â© <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(map);
	
	// Set function for color ramp
	function getColor(traffic){
		return traffic == 'medium' ? 'orange' :  //condition ? exprIfTrue : exprIfFalse
			   traffic == 'high' ? 'red' :
								'green';
	       }	
	
	// Set style function that sets fill color property
	function style(feature) {
		return {
			fillColor: setColor(feature.properties.traffic),
			fillOpacity: 0.5,
			weight: 2,
			opacity: 1,
			color: '#ffffff',
			dashArray: '3'
		};
	}
		
// layer 1

  
     var POI = L.geoJson(null, {
			
            pointToLayer: function(feature, latlng) {
		
				return L.circleMarker(latlng, {
				radius:6,
				opacity: .5,
				//color: "#000",
				color:getColor(feature.properties.traffic),
				fillColor:  getColor(feature.properties.traffic),
				fillOpacity: 0.8

				});  //.bindTooltip(feature.properties.Name);
            },
			
				onEachFeature: function (feature, layer) {
					layer._leaflet_id = feature.properties.name;

				
					var popupContent = "<p>Location: <b>" +
					feature.properties.name + "</b> </br> Traffic: <b>" +
					feature.properties.traffic + "</b> </br>";
							
					if (feature.properties && feature.properties.popupContent) {
						popupContent += feature.properties.popupContent;
					}
						layer.bindPopup(popupContent);

				}
				
				});
   
	
	$.getJSON(url1, function(data) {			
		POI.addData(data).addTo(map);
	});	
//END Layer1
/* 
/// Layer 2
		function getColor2(traffic){
		return traffic == 'NFC' ? 'green' :
			   traffic == 'AFC' ? 'orange' :
								'white';
	       }	
	
	// Set style function that sets fill color property
	function style2(feature) {
		return {
			fillColor: setColor(feature.properties.traffic),
			fillOpacity: 0.5,
			weight: 2,
			opacity: 1,
			color: '#ffffff',
			dashArray: '3'
		};
	}	
*/
  //layer2
       var userCurrentLocation = L.geoJson(null, {
			
            pointToLayer: function(feature, latlng) {
		
				return L.circleMarker(latlng, {
				radius:6,
				opacity: .5,
				color: "#000",
				//color:getColor2(feature.properties.traffic),
				//fillColor:  getColor2(feature.properties.traffic),
				//fillOpacity: 0.8

				});  //.bindTooltip(feature.properties.Name);
            },
			
			onEachFeature: function (feature, layer) {
				layer._leaflet_id = feature.properties.Team;

			
				var popupContent = "<p>User is here<b>";
				//feature.properties.Team + "</b> play here,</br> They are in the " +
				//feature.properties.traffic + "</br>" +
				//'<a href="'+ feature.properties.Website +'" target="_blank">Website</a></p>' ;
						
				//if (feature.properties && feature.properties.popupContent) {
				//	popupContent += feature.properties.popupContent;
				//}
				//	layer.bindPopup(popupContent);
			

			}
		});
		
	$.getJSON(url2, function(data2) {			
		userCurrentLocation.addData(data2);
	});		
	
//layer 2		

/////////////////////Layer Control  /////////////////////////////////////////////////
	
            var baseMaps = {
                'Open StreetMap': osm
            };

            var overlayMaps = {
			'Points Of Interest': POI,
 //            'Football"': userCurrentLocation
            };

		L.control.layers(baseMaps, overlayMaps).addTo(map);

L.Control.geocoder().addTo(map);	

L.control.locate().addTo(map);

 </script>

</body>
</html>